# Rules and Blends Maker

This project ships a single CLI script (`rules_blends_manager.py`) that automates the two-step workflow you described:

1. **Prep a raw file** (`rules.txt`, `blends.txt`, etc.) to extract every `alias` block and every `rule entry` block into their own fragments under `Alias and Rule Entrys/`.
2. **Compile** those fragments back into `MasterRules.txt` and `MasterBlends.txt`, wrapping them in the headers/footers that the Project Zomboid tooling expects.

## Layout

- `Original/`: drop your mod's original `.txt` files here. The `prep` command will try to resolve the source path relative to this folder if you omit the directory.
- `Alias and Rule Entrys/`: populated by the prep step (`<basename>_alias.txt` and `<basename>_rules_entry.txt`).
- `MasterRules.txt` and `MasterBlends.txt`: generated by the `compile` command.

Placeholder `.gitkeep` files are committed so both folders are visible in the repo.

## Usage

```bash
python rules_blends_manager.py prep Original/MyModRules.txt
python rules_blends_manager.py compile
```

### `prep`

- Scans the supplied file (absolute path or relative to `Original/`) for lines that begin with `alias` or `rule entry` (any capitalization, plus variants such as `ruleentry`/`rules entry`).
- Writes the found alias blocks to `Alias and Rule Entrys/<basename>_alias.txt` and the rule entries to `Alias and Rule Entrys/<basename>_rules_entry.txt`.
- Use `--alias-dir`, `--alias-suffix`, and `--rules-suffix` to override the fragment paths/suffixes. `--dry-run` will show you what would happen without writing files.

### `compile`

- Reads every fragment under `Alias and Rule Entrys/`, sorts them alphabetically, and concatenates the alias fragments and rule fragments separately.
- Wraps the joined fragments with `Rules\n{\n...\n}\n` and `Blends\n{\n...\n}\n` by default before writing to `MasterRules.txt` and `MasterBlends.txt`.
- Use `--rules-prefix`/`--rules-suffix` and `--blends-prefix`/`--blends-suffix` to adjust the headers/footers, and `--fragment-dir` to point to a different folder.

## Tips

- Run `python rules_blends_manager.py -h` for a quick reminder about the supported parameters.
- The script normalizes line endings to LF so the generated master files stay consistent across platforms.
